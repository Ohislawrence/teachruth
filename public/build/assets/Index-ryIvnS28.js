import{d as B,j as D,k as _,s as g,c as v,w as c,a as e,t as a,l as L,v as P,e as i,f,o as l,F as b,i as w,n as u,h as n,b as y,g as m,p as h}from"./app-CN3FlaHZ.js";import{_ as F}from"./AppLayout-D1Cufdxy.js";import{l as U}from"./lodash-DDHyYdCl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"py-12"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},$={class:"grid grid-cols-1 gap-5 sm:grid-cols-4 mb-6"},q={class:"bg-white overflow-hidden shadow rounded-lg"},E={class:"px-4 py-5 sm:p-6"},I={class:"mt-1 text-3xl font-semibold text-gray-900"},O={class:"bg-white overflow-hidden shadow rounded-lg"},J={class:"px-4 py-5 sm:p-6"},R={class:"mt-1 text-3xl font-semibold text-green-600"},G={class:"bg-white overflow-hidden shadow rounded-lg"},K={class:"px-4 py-5 sm:p-6"},Q={class:"mt-1 text-3xl font-semibold text-blue-600"},X={class:"bg-white overflow-hidden shadow rounded-lg"},Y={class:"px-4 py-5 sm:p-6"},Z={class:"mt-1 text-3xl font-semibold text-purple-600"},ee={class:"bg-white shadow-sm rounded-lg p-6 mb-6"},te={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},se={class:"bg-white shadow overflow-hidden sm:rounded-lg"},oe={class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200"},re={class:"bg-white divide-y divide-gray-200"},le={class:"px-6 py-4 whitespace-nowrap"},ie={class:"flex items-center"},ne={class:"flex-shrink-0 h-10 w-10"},de=["src","alt"],ce={class:"ml-4"},ue={class:"text-sm font-medium text-gray-900"},xe={class:"text-sm text-gray-500"},pe={class:"text-xs text-gray-400"},me={class:"px-6 py-4 whitespace-nowrap"},he={key:0,class:"text-sm text-gray-900 space-y-1"},ge={class:"font-medium"},fe={class:"text-xs text-gray-500"},ye={key:1,class:"text-sm text-gray-500 italic"},_e={class:"px-6 py-4 whitespace-nowrap"},ve={class:"text-sm text-gray-900"},be={key:1,class:"text-xs text-gray-500"},we={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ke={key:0,class:"text-xs text-gray-500"},Se={class:"px-6 py-4 whitespace-nowrap"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Te=["onClick"],je={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Ae={class:"flex-1 flex justify-between sm:hidden"},Ne={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Me={class:"text-sm text-gray-700"},ze={class:"font-medium"},Ve={class:"font-medium"},Be={class:"font-medium"},De={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Le={key:1,class:"text-center py-12"},We={__name:"Index",props:{teachers:Object,filters:Object},setup(r){const x=r,p=B({search:x.filters.search||""});D(p,U.debounce(o=>{_.get(route("admin.teachers"),o,{preserveState:!0,replace:!0})},300),{deep:!0});const k=()=>{p.value={search:""}},S=g(()=>x.teachers.data.filter(o=>!o.suspended_at).length),C=g(()=>x.teachers.data.filter(o=>o.appraisals_count>0).length),T=g(()=>{const o=x.teachers.data.filter(s=>s.latest_appraisal&&s.latest_appraisal.overall_score);if(o.length===0)return 0;const t=o.reduce((s,d)=>s+parseFloat(d.latest_appraisal.overall_score),0);return Math.round(t/o.length)}),j=o=>o>=80?"text-green-600":o>=70?"text-yellow-600":o>=60?"text-orange-600":"text-red-600",A=o=>o.suspended_at?"bg-red-100 text-red-800":o.teacher_profile?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",N=o=>o.suspended_at?"Suspended":o.teacher_profile?"Active":"Incomplete",M=o=>Math.floor((o.job_applications_count||0)*.3),z=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),V=o=>{const t=o.suspended_at?"unsuspend":"suspend";if(confirm(`Are you sure you want to ${t} this teacher?`)){const s=o.suspended_at?"admin.users.unsuspend":"admin.users.suspend";_.post(route(s,o.id),{},{preserveScroll:!0,onSuccess:()=>{}})}};return(o,t)=>(l(),v(F,null,{header:c(()=>[...t[1]||(t[1]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Teachers Management ",-1)])]),default:c(()=>[e("div",H,[e("div",W,[e("div",$,[e("div",q,[e("div",E,[t[2]||(t[2]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Teachers",-1)),e("dd",I,a(r.teachers.total),1)])]),e("div",O,[e("div",J,[t[3]||(t[3]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active Profiles",-1)),e("dd",R,a(S.value),1)])]),e("div",G,[e("div",K,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"With Appraisals",-1)),e("dd",Q,a(C.value),1)])]),e("div",X,[e("div",Y,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Avg. Score",-1)),e("dd",Z,a(T.value)+"%",1)])])]),e("div",ee,[e("div",te,[e("div",null,[t[6]||(t[6]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),L(e("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>p.value.search=s),placeholder:"Name, email, qualification...",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[P,p.value.search]])]),e("div",{class:"flex items-end space-x-2"},[e("button",{onClick:k,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset ")])])]),e("div",se,[t[16]||(t[16]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," All Teachers "),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Manage and monitor all registered teachers in the system. ")],-1)),e("div",oe,[e("table",ae,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Teacher "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Profile "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Appraisals "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Applications "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",re,[(l(!0),i(b,null,w(r.teachers.data,s=>(l(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",le,[e("div",ie,[e("div",ne,[e("img",{class:"h-10 w-10 rounded-full",src:s.profile_photo_url,alt:s.name},null,8,de)]),e("div",ce,[e("div",ue,a(s.name),1),e("div",xe,a(s.email),1),e("div",pe," Joined "+a(z(s.created_at)),1)])])]),e("td",me,[s.teacher_profile?(l(),i("div",he,[e("div",ge,a(s.teacher_profile.qualification),1),e("div",null,a(s.teacher_profile.specialization),1),e("div",fe,a(s.teacher_profile.years_of_experience)+" yrs exp ",1)])):(l(),i("div",ye," Profile incomplete "))]),e("td",_e,[e("div",ve,a(s.appraisals_count||0)+" total ",1),s.latest_appraisal?(l(),i("div",{key:0,class:u(["text-xs",j(s.latest_appraisal.overall_score)])}," Latest: "+a(s.latest_appraisal.overall_score)+"% ",3)):(l(),i("div",be," No appraisals "))]),e("td",we,[n(a(s.job_applications_count||0)+" applications ",1),s.job_applications_count>0?(l(),i("div",ke,a(M(s))+" shortlisted ",1)):f("",!0)]),e("td",Se,[e("span",{class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",A(s)])},a(N(s)),3)]),e("td",Ce,[y(m(h),{href:o.route("admin.teachers.show",s.id),class:"text-blue-600 hover:text-blue-900 mr-3"},{default:c(()=>[...t[7]||(t[7]=[n(" View ",-1)])]),_:1},8,["href"]),e("button",{onClick:d=>V(s),class:"text-red-600 hover:text-red-900"},a(s.suspended_at?"Unsuspend":"Suspend"),9,Te)])]))),128))])])]),r.teachers.links.length>3?(l(),i("div",je,[e("div",Ae,[y(m(h),{href:r.teachers.prev_page_url,class:u([{"opacity-50 cursor-not-allowed":!r.teachers.prev_page_url},"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"])},{default:c(()=>[...t[9]||(t[9]=[n(" Previous ",-1)])]),_:1},8,["href","class"]),y(m(h),{href:r.teachers.next_page_url,class:u([{"opacity-50 cursor-not-allowed":!r.teachers.next_page_url},"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"])},{default:c(()=>[...t[10]||(t[10]=[n(" Next ",-1)])]),_:1},8,["href","class"])]),e("div",Ne,[e("div",null,[e("p",Me,[t[11]||(t[11]=n(" Showing ",-1)),e("span",ze,a(r.teachers.from),1),t[12]||(t[12]=n(" to ",-1)),e("span",Ve,a(r.teachers.to),1),t[13]||(t[13]=n(" of ",-1)),e("span",Be,a(r.teachers.total),1),t[14]||(t[14]=n(" teachers ",-1))])]),e("div",null,[e("nav",De,[(l(!0),i(b,null,w(r.teachers.links,(s,d)=>(l(),v(m(h),{key:d,href:s.url,class:u(["relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",{"bg-blue-50 border-blue-500 text-blue-600 z-10":s.active,"rounded-l-md":d===0,"rounded-r-md":d===r.teachers.links.length-1}]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])])):f("",!0),r.teachers.data.length===0?(l(),i("div",Le,[...t[15]||(t[15]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No teachers found",-1),e("p",{class:"mt-1 text-sm text-gray-500"}," No teachers match your current search criteria. ",-1)])])):f("",!0)])])])]),_:1}))}};export{We as default};
