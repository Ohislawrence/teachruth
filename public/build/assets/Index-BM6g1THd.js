import{d as w,j as U,k as M,c as D,w as x,a as t,e as d,f as u,t as o,l as p,v as _,m as T,b as k,g as v,p as b,h as m,o as r,F as V,i as j,n as f}from"./app-CN3FlaHZ.js";import{_ as A}from"./AppLayout-D1Cufdxy.js";import{l as B}from"./lodash-DDHyYdCl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"py-12"},O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"grid grid-cols-1 gap-5 sm:grid-cols-6 mb-6"},I={class:"bg-white overflow-hidden shadow rounded-lg"},J={class:"px-4 py-5 sm:p-6"},$={class:"mt-1 text-2xl font-semibold text-green-600"},E={class:"bg-white overflow-hidden shadow rounded-lg"},H={class:"px-4 py-5 sm:p-6"},G={class:"mt-1 text-2xl font-semibold text-gray-900"},q={class:"bg-white overflow-hidden shadow rounded-lg"},K={class:"px-4 py-5 sm:p-6"},Q={class:"mt-1 text-2xl font-semibold text-green-600"},W={class:"bg-white overflow-hidden shadow rounded-lg"},X={class:"px-4 py-5 sm:p-6"},Y={class:"mt-1 text-2xl font-semibold text-yellow-600"},Z={class:"bg-white overflow-hidden shadow rounded-lg"},tt={class:"px-4 py-5 sm:p-6"},et={class:"mt-1 text-2xl font-semibold text-red-600"},st={class:"bg-white overflow-hidden shadow rounded-lg"},ot={class:"px-4 py-5 sm:p-6"},lt={class:"mt-1 text-2xl font-semibold text-blue-600"},at={class:"bg-white shadow-sm rounded-lg p-6 mb-6"},nt={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},rt={class:"flex items-end space-x-2"},dt={class:"bg-white shadow overflow-hidden sm:rounded-lg"},it={class:"overflow-x-auto"},ut={class:"min-w-full divide-y divide-gray-200"},mt={class:"bg-white divide-y divide-gray-200"},ct={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm font-mono text-gray-900"},ft={class:"text-xs text-gray-500"},gt={class:"px-6 py-4 whitespace-nowrap"},yt={class:"flex items-center"},pt={class:"flex-shrink-0 h-10 w-10"},vt=["src","alt"],bt={class:"ml-4"},ht={class:"text-sm font-medium text-gray-900"},wt={class:"text-sm text-gray-500"},_t={class:"px-6 py-4 whitespace-nowrap"},kt={class:"text-sm font-semibold text-gray-900"},St={class:"text-xs text-gray-500"},Ct={class:"px-6 py-4 whitespace-nowrap"},Pt={key:0,class:"text-xs text-gray-500 mt-1"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Vt=["onClick"],jt=["onClick"],Nt={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Lt={class:"flex-1 flex justify-between sm:hidden"},Rt={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ut={class:"text-sm text-gray-700"},Tt={class:"font-medium"},At={class:"font-medium"},Bt={class:"font-medium"},Ft={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ot={key:1,class:"text-center py-12"},zt={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},It={class:"bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:max-w-2xl sm:w-full sm:mx-auto"},Jt={class:"px-6 py-4"},$t={key:0,class:"space-y-4"},Et={class:"grid grid-cols-2 gap-4"},Ht={class:"text-sm font-mono text-gray-900"},Gt={class:"text-sm font-semibold text-gray-900"},qt={class:"text-sm text-gray-900"},Kt={class:"text-sm text-gray-900"},Qt={key:0},Wt={class:"text-sm text-gray-900"},Xt={class:"border-t pt-4"},Yt={class:"flex items-center space-x-3"},Zt=["src","alt"],te={class:"text-sm font-medium text-gray-900"},ee={class:"text-sm text-gray-500"},se={key:0,class:"border-t pt-4"},oe={class:"text-xs bg-gray-100 p-3 rounded overflow-auto max-h-32"},le={key:1,class:"border-t pt-4"},ae={class:"text-xs bg-gray-100 p-3 rounded overflow-auto max-h-32"},ue={__name:"Index",props:{payments:Object,stats:Object,filters:Object},setup(l){const g=l,i=w({search:g.filters.search||"",status:g.filters.status||"",date_from:g.filters.date_from||"",date_to:g.filters.date_to||""}),h=w(!1),a=w(null);U(i,B.debounce(n=>{M.get(route("admin.payments"),n,{preserveState:!0,replace:!0})},300),{deep:!0});const N=()=>{i.value={search:"",status:"",date_from:"",date_to:""}},S=n=>({successful:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800"})[n]||"bg-gray-100 text-gray-800",y=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),C=n=>{try{const e=JSON.parse(n);return JSON.stringify(e,null,2)}catch{return n}},L=n=>{a.value=n,h.value=!0},P=()=>{h.value=!1,a.value=null},R=n=>{confirm("Are you sure you want to manually verify this payment?")&&M.post(route("admin.payments.verify",n.id),{},{preserveScroll:!0,onSuccess:()=>{}})};return(n,e)=>(r(),D(A,null,{header:x(()=>[...e[4]||(e[4]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Payments Management ",-1)])]),default:x(()=>[t("div",F,[t("div",O,[t("div",z,[t("div",I,[t("div",J,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Revenue",-1)),t("dd",$,"₦"+o(l.stats.total_revenue?.toLocaleString()),1)])]),t("div",E,[t("div",H,[e[6]||(e[6]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Payments",-1)),t("dd",G,o(l.stats.total_payments),1)])]),t("div",q,[t("div",K,[e[7]||(e[7]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Successful",-1)),t("dd",Q,o(l.stats.successful_payments),1)])]),t("div",W,[t("div",X,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending",-1)),t("dd",Y,o(l.stats.pending_payments),1)])]),t("div",Z,[t("div",tt,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Failed",-1)),t("dd",et,o(l.stats.failed_payments),1)])]),t("div",st,[t("div",ot,[e[10]||(e[10]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Today's Revenue",-1)),t("dd",lt,"₦"+o(l.stats.today_revenue?.toLocaleString()),1)])])]),t("div",at,[t("div",nt,[t("div",null,[e[11]||(e[11]=t("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),p(t("input",{type:"text",id:"search","onUpdate:modelValue":e[0]||(e[0]=s=>i.value.search=s),placeholder:"Reference, user name...",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[_,i.value.search]])]),t("div",null,[e[13]||(e[13]=t("label",{for:"status",class:"block text-sm font-medium text-gray-700"},"Status",-1)),p(t("select",{id:"status","onUpdate:modelValue":e[1]||(e[1]=s=>i.value.status=s),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[...e[12]||(e[12]=[t("option",{value:""},"All Status",-1),t("option",{value:"successful"},"Successful",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"failed"},"Failed",-1)])],512),[[T,i.value.status]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"date_from",class:"block text-sm font-medium text-gray-700"},"From Date",-1)),p(t("input",{type:"date",id:"date_from","onUpdate:modelValue":e[2]||(e[2]=s=>i.value.date_from=s),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[_,i.value.date_from]])]),t("div",null,[e[15]||(e[15]=t("label",{for:"date_to",class:"block text-sm font-medium text-gray-700"},"To Date",-1)),p(t("input",{type:"date",id:"date_to","onUpdate:modelValue":e[3]||(e[3]=s=>i.value.date_to=s),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[_,i.value.date_to]])]),t("div",rt,[t("button",{onClick:N,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset "),k(v(b),{href:n.route("admin.payments.revenue-report"),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>[...e[16]||(e[16]=[m(" Revenue Report ",-1)])]),_:1},8,["href"])])])]),t("div",dt,[e[25]||(e[25]=t("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," All Payments "),t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Monitor and manage all payment transactions in the system. ")],-1)),t("div",it,[t("table",ut,[e[17]||(e[17]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reference "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",mt,[(r(!0),d(V,null,j(l.payments.data,s=>(r(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",ct,[t("div",xt,o(s.payment_reference),1),t("div",ft,"ID: "+o(s.id),1)]),t("td",gt,[t("div",yt,[t("div",pt,[t("img",{class:"h-10 w-10 rounded-full",src:s.user?.profile_photo_url,alt:s.user?.name},null,8,vt)]),t("div",bt,[t("div",ht,o(s.user?.name),1),t("div",wt,o(s.user?.email),1)])])]),t("td",_t,[t("div",kt,"₦"+o(s.amount?.toLocaleString()),1),t("div",St,o(s.currency),1)]),t("td",Ct,[t("span",{class:f(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",S(s.status)])},o(s.status.toUpperCase()),3),s.paid_at?(r(),d("div",Pt," Paid: "+o(y(s.paid_at)),1)):u("",!0)]),t("td",Mt,o(y(s.created_at)),1),t("td",Dt,[t("button",{onClick:c=>L(s),class:"text-blue-600 hover:text-blue-900 mr-3"}," View Details ",8,Vt),s.status==="pending"?(r(),d("button",{key:0,onClick:c=>R(s),class:"text-green-600 hover:text-green-900"}," Verify ",8,jt)):u("",!0)])]))),128))])])]),l.payments.links.length>3?(r(),d("div",Nt,[t("div",Lt,[k(v(b),{href:l.payments.prev_page_url,class:f([{"opacity-50 cursor-not-allowed":!l.payments.prev_page_url},"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"])},{default:x(()=>[...e[18]||(e[18]=[m(" Previous ",-1)])]),_:1},8,["href","class"]),k(v(b),{href:l.payments.next_page_url,class:f([{"opacity-50 cursor-not-allowed":!l.payments.next_page_url},"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"])},{default:x(()=>[...e[19]||(e[19]=[m(" Next ",-1)])]),_:1},8,["href","class"])]),t("div",Rt,[t("div",null,[t("p",Ut,[e[20]||(e[20]=m(" Showing ",-1)),t("span",Tt,o(l.payments.from),1),e[21]||(e[21]=m(" to ",-1)),t("span",At,o(l.payments.to),1),e[22]||(e[22]=m(" of ",-1)),t("span",Bt,o(l.payments.total),1),e[23]||(e[23]=m(" payments ",-1))])]),t("div",null,[t("nav",Ft,[(r(!0),d(V,null,j(l.payments.links,(s,c)=>(r(),D(v(b),{key:c,href:s.url,class:f(["relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",{"bg-blue-50 border-blue-500 text-blue-600 z-10":s.active,"rounded-l-md":c===0,"rounded-r-md":c===l.payments.links.length-1}]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])])):u("",!0),l.payments.data.length===0?(r(),d("div",Ot,[...e[24]||(e[24]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No payments found",-1),t("p",{class:"mt-1 text-sm text-gray-500"}," No payment transactions match your current filters. ",-1)])])):u("",!0)])])]),h.value?(r(),d("div",zt,[e[37]||(e[37]=t("div",{class:"fixed inset-0 transform transition-all"},[t("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t("div",It,[t("div",Jt,[t("div",{class:"flex justify-between items-center mb-4"},[e[27]||(e[27]=t("h3",{class:"text-lg font-medium text-gray-900"},"Payment Details",-1)),t("button",{onClick:P,class:"text-gray-400 hover:text-gray-500"},[...e[26]||(e[26]=[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),a.value?(r(),d("div",$t,[t("div",Et,[t("div",null,[e[28]||(e[28]=t("label",{class:"text-sm font-medium text-gray-500"},"Reference",-1)),t("p",Ht,o(a.value.payment_reference),1)]),t("div",null,[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("span",{class:f(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",S(a.value.status)])},o(a.value.status.toUpperCase()),3)]),t("div",null,[e[30]||(e[30]=t("label",{class:"text-sm font-medium text-gray-500"},"Amount",-1)),t("p",Gt,"₦"+o(a.value.amount?.toLocaleString()),1)]),t("div",null,[e[31]||(e[31]=t("label",{class:"text-sm font-medium text-gray-500"},"Currency",-1)),t("p",qt,o(a.value.currency),1)]),t("div",null,[e[32]||(e[32]=t("label",{class:"text-sm font-medium text-gray-500"},"Created",-1)),t("p",Kt,o(y(a.value.created_at)),1)]),a.value.paid_at?(r(),d("div",Qt,[e[33]||(e[33]=t("label",{class:"text-sm font-medium text-gray-500"},"Paid At",-1)),t("p",Wt,o(y(a.value.paid_at)),1)])):u("",!0)]),t("div",Xt,[e[34]||(e[34]=t("h4",{class:"text-md font-medium text-gray-900 mb-2"},"User Information",-1)),t("div",Yt,[t("img",{class:"h-10 w-10 rounded-full",src:a.value.user?.profile_photo_url,alt:a.value.user?.name},null,8,Zt),t("div",null,[t("p",te,o(a.value.user?.name),1),t("p",ee,o(a.value.user?.email),1)])])]),a.value.gateway_response?(r(),d("div",se,[e[35]||(e[35]=t("h4",{class:"text-md font-medium text-gray-900 mb-2"},"Gateway Response",-1)),t("pre",oe,o(C(a.value.gateway_response)),1)])):u("",!0),a.value.metadata?(r(),d("div",le,[e[36]||(e[36]=t("h4",{class:"text-md font-medium text-gray-900 mb-2"},"Metadata",-1)),t("pre",ae,o(C(a.value.metadata)),1)])):u("",!0)])):u("",!0)]),t("div",{class:"bg-gray-50 px-6 py-3 flex justify-end"},[t("button",{onClick:P,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Close ")])])])):u("",!0)]),_:1}))}};export{ue as default};
