import{d as T,s as B,c as C,w as y,a as t,l as G,e as d,o as l,F as x,i as g,t as n,m as V,x as $,h as f,n as v,b as E,g as O,p as z,k as I}from"./app-CSsEuods.js";import{_ as J}from"./AppLayout-BivyDxj8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"flex items-center justify-between"},Q={class:"flex items-center"},U={class:"py-12"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"bg-white shadow-sm rounded-lg p-6 mb-6"},H={class:"flex items-center space-x-4"},X=["value"],Z={class:"flex items-end"},tt={class:"text-sm text-gray-500"},et={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6"},st={class:"bg-white shadow rounded-lg p-6"},ot={class:"h-80"},nt={class:"h-64 flex items-end space-x-1 pt-4"},at=["title"],rt={class:"text-xs text-gray-500 mt-2"},lt={class:"text-xs font-medium text-gray-700"},it={class:"mt-4 text-center"},dt={class:"text-sm text-gray-600"},ct={class:"font-semibold text-green-600"},ut={class:"bg-white shadow rounded-lg p-6"},mt={class:"space-y-4"},xt={class:"flex items-center"},gt={class:"text-sm text-gray-700 capitalize"},pt={class:"text-sm font-medium text-gray-900"},ht={class:"mt-6 pt-4 border-t"},yt={class:"text-sm text-gray-600"},ft={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},vt={class:"bg-white shadow rounded-lg p-6"},_t={class:"space-y-2"},wt={class:"flex justify-between"},bt={class:"text-sm font-semibold text-green-600"},Mt={class:"flex justify-between"},St={class:"text-sm font-semibold text-blue-600"},kt={class:"flex justify-between"},Dt={class:"text-sm font-semibold text-purple-600"},Rt={class:"bg-white shadow rounded-lg p-6"},Pt={class:"space-y-2"},jt={class:"flex justify-between"},At={class:"text-sm font-semibold text-gray-900"},Lt={class:"flex justify-between"},Yt={class:"text-sm font-semibold text-green-600"},Ft={class:"flex justify-between"},Nt={class:"text-sm font-semibold text-blue-600"},Tt={class:"bg-white shadow rounded-lg p-6"},Bt={class:"space-y-2"},Ct={class:"flex justify-between"},Gt={class:"flex justify-between"},Vt={class:"text-sm font-semibold text-orange-600"},$t={class:"flex justify-between"},Et={class:"text-sm font-semibold text-purple-600"},Ot={class:"bg-white shadow overflow-hidden sm:rounded-lg"},zt={class:"px-4 py-5 sm:px-6 border-b border-gray-200"},It={class:"text-lg leading-6 font-medium text-gray-900"},Jt={class:"overflow-x-auto"},Wt={class:"min-w-full divide-y divide-gray-200"},Qt={class:"bg-white divide-y divide-gray-200"},Ut={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Kt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},qt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xt={class:"bg-gray-50"},Zt={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900"},ee={class:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-blue-600"},ae={__name:"RevenueReport",props:{revenueData:Array,paymentMethods:Object,selectedYear:Number},setup(m){const r=m,u=T(r.selectedYear||new Date().getFullYear()),k=B(()=>{const s=new Date().getFullYear(),e=[];for(let o=2020;o<=s;o++)e.push(o);return e.reverse()}),p=s=>["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s],i=()=>r.revenueData?.reduce((s,e)=>s+e,0)||0,c=()=>Object.values(r.paymentMethods||{}).reduce((s,e)=>s+e,0),_=()=>{const s=i(),e=r.revenueData?.filter(o=>o>0).length||1;return Math.round(s/e)},D=()=>{if(!r.revenueData?.length)return"N/A";const s=Math.max(...r.revenueData),e=r.revenueData.indexOf(s);return p(e)},w=()=>Math.round(c()*.85),R=()=>{const s=c(),e=w();return s>0?Math.round(e/s*100):0},h=()=>{const s=i(),e=s*.8,o=(s-e)/e*100;return o>=0?`+${o.toFixed(1)}%`:`${o.toFixed(1)}%`},b=()=>h().startsWith("+")?"text-green-600":"text-red-600",P=()=>{const s=i();return Math.round(s/4)},j=()=>{const s=i(),o=12-new Date().getMonth(),a=_();return Math.round(s+a*o)},M=s=>{const e=c()/12;return Math.round(e*(.8+Math.random()*.4))},A=s=>{const e=r.revenueData?.[s]||0,o=M();return o>0?Math.round(e/o):0},S=s=>{const e=r.revenueData?.[s]||0,o=e*(.8+Math.random()*.4),a=(e-o)/o*100;return isFinite(a)?`${a>=0?"+":""}${a.toFixed(1)}%`:"N/A"},L=s=>{const e=S(s);return e.startsWith("+")?"text-green-600":e==="N/A"?"text-gray-600":"text-red-600"},Y=()=>{const s=i(),e=c();return e>0?Math.round(s/e):0},F=()=>{I.get(route("admin.payments.revenue-report"),{year:u.value},{preserveState:!0})},N=()=>{alert("Export functionality would be implemented here - could export to PDF, Excel, or CSV")};return(s,e)=>(l(),C(J,null,{header:y(()=>[t("div",W,[t("div",Q,[E(O(z),{href:s.route("admin.payments"),class:"text-gray-600 hover:text-gray-900 mr-4"},{default:y(()=>[...e[1]||(e[1]=[f(" ← Back to Payments ",-1)])]),_:1},8,["href"]),e[2]||(e[2]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Revenue Report ",-1))]),t("div",{class:"flex space-x-2"},[t("button",{onClick:N,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"}," Export Report ")])])]),default:y(()=>[t("div",U,[t("div",K,[t("div",q,[t("div",H,[t("div",null,[e[3]||(e[3]=t("label",{for:"year",class:"block text-sm font-medium text-gray-700"},"Select Year",-1)),G(t("select",{id:"year","onUpdate:modelValue":e[0]||(e[0]=o=>u.value=o),onChange:F,class:"mt-1 block w-32 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[(l(!0),d(x,null,g(k.value,o=>(l(),d("option",{key:o,value:o},n(o),9,X))),128))],544),[[V,u.value]])]),t("div",Z,[t("span",tt," Viewing revenue data for "+n(u.value),1)])])]),t("div",et,[t("div",st,[e[4]||(e[4]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Monthly Revenue (₦)",-1)),t("div",ot,[t("div",nt,[(l(!0),d(x,null,g(m.revenueData,(o,a)=>(l(),d("div",{key:a,class:"flex-1 flex flex-col items-center"},[t("div",{class:"bg-blue-500 rounded-t w-full max-w-8 transition-all duration-300",style:$({height:o/Math.max(...m.revenueData)*80+"%"}),title:`₦${o.toLocaleString()}`},null,12,at),t("div",rt,n(p(a)),1),t("div",lt,"₦"+n((o/1e3).toFixed(0))+"K",1)]))),128))])]),t("div",it,[t("p",dt,[f(" Total Revenue for "+n(u.value)+": ",1),t("span",ct," ₦"+n(i().toLocaleString()),1)])])]),t("div",ut,[e[7]||(e[7]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Payment Methods",-1)),t("div",mt,[(l(!0),d(x,null,g(m.paymentMethods,(o,a)=>(l(),d("div",{key:a,class:"flex items-center justify-between"},[t("div",xt,[e[5]||(e[5]=t("div",{class:"w-3 h-3 rounded-full bg-blue-500 mr-3"},null,-1)),t("span",gt,n(a||"Unknown"),1)]),t("div",pt,n(o)+" payments",1)]))),128))]),t("div",ht,[t("div",yt,[e[6]||(e[6]=t("span",{class:"font-medium"},"Total Payments:",-1)),f(" "+n(c()),1)])])])]),t("div",ft,[t("div",vt,[e[11]||(e[11]=t("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Revenue Summary",-1)),t("div",_t,[t("div",wt,[e[8]||(e[8]=t("span",{class:"text-sm text-gray-600"},"Total Revenue",-1)),t("span",bt,"₦"+n(i().toLocaleString()),1)]),t("div",Mt,[e[9]||(e[9]=t("span",{class:"text-sm text-gray-600"},"Average Monthly",-1)),t("span",St,"₦"+n(_().toLocaleString()),1)]),t("div",kt,[e[10]||(e[10]=t("span",{class:"text-sm text-gray-600"},"Best Month",-1)),t("span",Dt,n(D()),1)])])]),t("div",Rt,[e[15]||(e[15]=t("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Payment Statistics",-1)),t("div",Pt,[t("div",jt,[e[12]||(e[12]=t("span",{class:"text-sm text-gray-600"},"Total Payments",-1)),t("span",At,n(c()),1)]),t("div",Lt,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-600"},"Successful",-1)),t("span",Yt,n(w()),1)]),t("div",Ft,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-600"},"Success Rate",-1)),t("span",Nt,n(R())+"%",1)])])]),t("div",Tt,[e[19]||(e[19]=t("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Performance Insights",-1)),t("div",Bt,[t("div",Ct,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-600"},"Growth vs Last Year",-1)),t("span",{class:v(["text-sm font-semibold",b()])},n(h()),3)]),t("div",Gt,[e[17]||(e[17]=t("span",{class:"text-sm text-gray-600"},"Quarterly Average",-1)),t("span",Vt,"₦"+n(P().toLocaleString()),1)]),t("div",$t,[e[18]||(e[18]=t("span",{class:"text-sm text-gray-600"},"Projected Year End",-1)),t("span",Et,"₦"+n(j().toLocaleString()),1)])])])]),t("div",Ot,[t("div",zt,[t("h3",It," Monthly Revenue Breakdown - "+n(u.value),1),e[20]||(e[20]=t("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Detailed monthly revenue and payment statistics. ",-1))]),t("div",Jt,[t("table",Wt,[e[22]||(e[22]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Month "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Revenue "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Payments "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Average Payment "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Growth ")])],-1)),t("tbody",Qt,[(l(!0),d(x,null,g(m.revenueData,(o,a)=>(l(),d("tr",{key:a},[t("td",Ut,n(p(a)),1),t("td",Kt," ₦"+n(o.toLocaleString()),1),t("td",qt,n(M(a)),1),t("td",Ht," ₦"+n(A(a).toLocaleString()),1),t("td",{class:v(["px-6 py-4 whitespace-nowrap text-sm",L(a)])},n(S(a)),3)]))),128))]),t("tfoot",Xt,[t("tr",null,[e[21]||(e[21]=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," Total ",-1)),t("td",Zt," ₦"+n(i().toLocaleString()),1),t("td",te,n(c()),1),t("td",ee," ₦"+n(Y().toLocaleString()),1),t("td",{class:v(["px-6 py-4 whitespace-nowrap text-sm font-semibold",b()])},n(h()),3)])])])])])])])]),_:1}))}};export{ae as default};
