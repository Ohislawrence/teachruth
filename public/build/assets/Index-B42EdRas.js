import{d as J,j as $,k as x,s as y,c as _,w as c,a as e,t as r,l as H,v as L,e as n,f as h,o as l,F as b,i as w,n as p,b as v,g as f,p as g,h as d}from"./app-CN3FlaHZ.js";import{_ as P}from"./AppLayout-D1Cufdxy.js";import{l as z}from"./lodash-DDHyYdCl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"py-12"},E={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},I={class:"grid grid-cols-1 gap-5 sm:grid-cols-4 mb-6"},O={class:"bg-white overflow-hidden shadow rounded-lg"},R={class:"px-4 py-5 sm:p-6"},q={class:"mt-1 text-3xl font-semibold text-gray-900"},G={class:"bg-white overflow-hidden shadow rounded-lg"},K={class:"px-4 py-5 sm:p-6"},Q={class:"mt-1 text-3xl font-semibold text-green-600"},W={class:"bg-white overflow-hidden shadow rounded-lg"},X={class:"px-4 py-5 sm:p-6"},Y={class:"mt-1 text-3xl font-semibold text-yellow-600"},Z={class:"bg-white overflow-hidden shadow rounded-lg"},ee={class:"px-4 py-5 sm:p-6"},te={class:"mt-1 text-3xl font-semibold text-blue-600"},se={class:"bg-white shadow-sm rounded-lg p-6 mb-6"},oe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},re={class:"bg-white shadow overflow-hidden sm:rounded-lg"},ie={class:"overflow-x-auto"},le={class:"min-w-full divide-y divide-gray-200"},ne={class:"bg-white divide-y divide-gray-200"},de={class:"px-6 py-4 whitespace-nowrap"},ae={class:"flex items-center"},ce={class:"flex-shrink-0 h-10 w-10"},ue=["src","alt"],me={class:"ml-4"},xe={class:"text-sm font-medium text-gray-900"},he={class:"text-sm text-gray-500"},pe={class:"text-xs text-gray-400"},fe={class:"px-6 py-4 whitespace-nowrap"},ge={class:"text-sm text-gray-900"},ye={class:"text-sm text-gray-500"},ve={class:"text-xs text-gray-400"},_e={class:"px-6 py-4 whitespace-nowrap"},be={class:"text-sm text-gray-900"},we={class:"text-sm text-gray-500"},ke={key:0,class:"text-xs text-gray-400"},Se={class:"px-6 py-4 whitespace-nowrap"},Ce={key:0,class:"text-xs text-red-600 mt-1"},je={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ae=["onClick"],Ve=["onClick"],Me=["onClick"],Ne={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Te={class:"flex-1 flex justify-between sm:hidden"},Ue={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Be={class:"text-sm text-gray-700"},De={class:"font-medium"},Je={class:"font-medium"},$e={class:"font-medium"},He={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Le={key:1,class:"text-center py-12"},Ie={__name:"Index",props:{schools:Object,filters:Object},setup(i){const u=i,m=J({search:u.filters.search||""});$(m,z.debounce(o=>{x.get(route("admin.schools"),o,{preserveState:!0,replace:!0})},300),{deep:!0});const k=()=>{m.value={search:""}},S=y(()=>u.schools.data.filter(o=>o.school_profile?.is_verified).length),C=y(()=>u.schools.data.filter(o=>!o.school_profile?.is_verified).length),j=y(()=>u.schools.data.reduce((o,t)=>o+(t.jobs_count||0),0)),A=o=>o.suspended_at?"bg-red-100 text-red-800":o.school_profile?.is_verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",V=o=>o.suspended_at?"Suspended":o.school_profile?.is_verified?"Verified":"Pending Verification",M=o=>Math.floor((o.jobs_count||0)*3.5),N=o=>Math.floor((o.jobs_count||0)*.6),T=o=>new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),U=o=>{confirm("Are you sure you want to verify this school? They will be able to post jobs.")&&x.post(route("admin.schools.verify",o.id),{},{preserveScroll:!0,onSuccess:()=>{}})},B=o=>{confirm("Are you sure you want to remove verification from this school? They will not be able to post new jobs.")&&x.post(route("admin.schools.unverify",o.id),{},{preserveScroll:!0,onSuccess:()=>{}})},D=o=>{const t=o.suspended_at?"unsuspend":"suspend";if(confirm(`Are you sure you want to ${t} this school?`)){const s=o.suspended_at?"admin.users.unsuspend":"admin.users.suspend";x.post(route(s,o.id),{},{preserveScroll:!0,onSuccess:()=>{}})}};return(o,t)=>(l(),_(P,null,{header:c(()=>[...t[1]||(t[1]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Schools Management ",-1)])]),default:c(()=>[e("div",F,[e("div",E,[e("div",I,[e("div",O,[e("div",R,[t[2]||(t[2]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Schools",-1)),e("dd",q,r(i.schools.total),1)])]),e("div",G,[e("div",K,[t[3]||(t[3]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Verified",-1)),e("dd",Q,r(S.value),1)])]),e("div",W,[e("div",X,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending Approval",-1)),e("dd",Y,r(C.value),1)])]),e("div",Z,[e("div",ee,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active Jobs",-1)),e("dd",te,r(j.value),1)])])]),e("div",se,[e("div",oe,[e("div",null,[t[6]||(t[6]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),H(e("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>m.value.search=s),placeholder:"School name, location...",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[L,m.value.search]])]),e("div",{class:"flex items-end space-x-2"},[e("button",{onClick:k,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset ")])])]),e("div",re,[t[16]||(t[16]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," All Schools "),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Manage and monitor all registered schools in the system. ")],-1)),e("div",ie,[e("table",le,[t[8]||(t[8]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," School "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Contact Information "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Jobs & Applications "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ne,[(l(!0),n(b,null,w(i.schools.data,s=>(l(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",de,[e("div",ae,[e("div",ce,[e("img",{class:"h-10 w-10 rounded-full",src:s.school_profile?.logo_url||s.profile_photo_url,alt:s.school_profile?.school_name||s.name},null,8,ue)]),e("div",me,[e("div",xe,r(s.school_profile?.school_name||s.name),1),e("div",he,r(s.school_profile?.school_type?.toUpperCase())+" â€¢ "+r(s.school_profile?.ownership?.toUpperCase()),1),e("div",pe,r(s.school_profile?.state)+", "+r(s.school_profile?.lga),1)])])]),e("td",fe,[e("div",ge,r(s.email),1),e("div",ye,r(s.school_profile?.phone||"No phone"),1),e("div",ve," Joined "+r(T(s.created_at)),1)]),e("td",_e,[e("div",be,r(s.jobs_count||0)+" jobs posted ",1),e("div",we,r(M(s))+" total applications ",1),s.jobs_count>0?(l(),n("div",ke,r(N(s))+" active jobs ",1)):h("",!0)]),e("td",Se,[e("span",{class:p(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",A(s)])},r(V(s)),3),s.suspended_at?(l(),n("div",Ce," Suspended ")):h("",!0)]),e("td",je,[v(f(g),{href:o.route("admin.schools.show",s.id),class:"text-blue-600 hover:text-blue-900 mr-3"},{default:c(()=>[...t[7]||(t[7]=[d(" View ",-1)])]),_:1},8,["href"]),s.school_profile?.is_verified?(l(),n("button",{key:1,onClick:a=>B(s),class:"text-yellow-600 hover:text-yellow-900 mr-3"}," Unverify ",8,Ve)):(l(),n("button",{key:0,onClick:a=>U(s),class:"text-green-600 hover:text-green-900 mr-3"}," Verify ",8,Ae)),e("button",{onClick:a=>D(s),class:"text-red-600 hover:text-red-900"},r(s.suspended_at?"Unsuspend":"Suspend"),9,Me)])]))),128))])])]),i.schools.links.length>3?(l(),n("div",Ne,[e("div",Te,[v(f(g),{href:i.schools.prev_page_url,class:p([{"opacity-50 cursor-not-allowed":!i.schools.prev_page_url},"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"])},{default:c(()=>[...t[9]||(t[9]=[d(" Previous ",-1)])]),_:1},8,["href","class"]),v(f(g),{href:i.schools.next_page_url,class:p([{"opacity-50 cursor-not-allowed":!i.schools.next_page_url},"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"])},{default:c(()=>[...t[10]||(t[10]=[d(" Next ",-1)])]),_:1},8,["href","class"])]),e("div",Ue,[e("div",null,[e("p",Be,[t[11]||(t[11]=d(" Showing ",-1)),e("span",De,r(i.schools.from),1),t[12]||(t[12]=d(" to ",-1)),e("span",Je,r(i.schools.to),1),t[13]||(t[13]=d(" of ",-1)),e("span",$e,r(i.schools.total),1),t[14]||(t[14]=d(" schools ",-1))])]),e("div",null,[e("nav",He,[(l(!0),n(b,null,w(i.schools.links,(s,a)=>(l(),_(f(g),{key:a,href:s.url,class:p(["relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",{"bg-blue-50 border-blue-500 text-blue-600 z-10":s.active,"rounded-l-md":a===0,"rounded-r-md":a===i.schools.links.length-1}]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])])])):h("",!0),i.schools.data.length===0?(l(),n("div",Le,[...t[15]||(t[15]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No schools found",-1),e("p",{class:"mt-1 text-sm text-gray-500"}," No schools match your current search criteria. ",-1)])])):h("",!0)])])])]),_:1}))}};export{Ie as default};
