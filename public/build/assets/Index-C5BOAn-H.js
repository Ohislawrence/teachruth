import{d as v,j as P,k as b,s as w,c as C,w as h,e as n,f as x,a as e,o as l,t as r,l as R,v as E,F as T,i as S,n as p,h as i,b as k,g as y,p as _}from"./app-CSsEuods.js";import{_ as H}from"./AppLayout-BivyDxj8.js";import{l as W}from"./lodash-BwiGWe_m.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={key:0,class:"max-w-7xl mx-auto sm:px-6 lg:px-8 mt-4"},J={class:"bg-green-50 border-l-4 border-green-400 p-4"},G={class:"flex"},K={class:"ml-3"},Q={class:"text-sm text-green-700"},X={key:1,class:"max-w-7xl mx-auto sm:px-6 lg:px-8 mt-4"},Y={class:"bg-red-50 border-l-4 border-red-400 p-4"},Z={class:"flex"},ee={class:"ml-3"},te={class:"text-sm text-red-700"},se={class:"py-12"},oe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},re={class:"grid grid-cols-1 gap-5 sm:grid-cols-4 mb-6"},le={class:"bg-white overflow-hidden shadow rounded-lg"},ae={class:"px-4 py-5 sm:p-6"},ne={class:"mt-1 text-3xl font-semibold text-gray-900"},ie={class:"bg-white overflow-hidden shadow rounded-lg"},de={class:"px-4 py-5 sm:p-6"},ce={class:"mt-1 text-3xl font-semibold text-green-600"},ue={class:"bg-white overflow-hidden shadow rounded-lg"},me={class:"px-4 py-5 sm:p-6"},xe={class:"mt-1 text-3xl font-semibold text-blue-600"},pe={class:"bg-white overflow-hidden shadow rounded-lg"},fe={class:"px-4 py-5 sm:p-6"},he={class:"mt-1 text-3xl font-semibold text-purple-600"},ge={class:"bg-white shadow-sm rounded-lg p-6 mb-6"},ve={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ye={class:"bg-white shadow overflow-hidden sm:rounded-lg"},_e={class:"px-4 py-5 sm:px-6 border-b border-gray-200"},be={class:"flex justify-between items-center"},we={class:"text-sm text-gray-500"},ke={class:"overflow-x-auto"},Ce={class:"min-w-full divide-y divide-gray-200"},Te={class:"bg-white divide-y divide-gray-200"},Se={class:"px-6 py-4 whitespace-nowrap"},je={class:"flex items-center"},De={class:"flex-shrink-0 h-10 w-10"},Ae=["src","alt"],Me={class:"ml-4"},ze={class:"text-sm font-medium text-gray-900"},Le={class:"text-sm text-gray-500"},$e={class:"text-xs text-gray-400"},Ne={class:"px-6 py-4 whitespace-nowrap"},Be={key:0,class:"text-sm text-gray-900 space-y-1"},Ie={class:"font-medium"},Fe={class:"text-xs text-gray-500"},Ue={key:1,class:"text-sm text-gray-500 italic"},Ve={class:"px-6 py-4 whitespace-nowrap"},Pe={class:"text-sm text-gray-900"},Re={key:1,class:"text-xs text-gray-500"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},He={key:0,class:"text-xs text-gray-500"},We={class:"px-6 py-4 whitespace-nowrap"},qe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Oe={class:"flex items-center space-x-3"},Je=["onClick"],Ge=["onClick"],Ke={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Qe={class:"flex-1 flex justify-between sm:hidden"},Xe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},Ye={class:"text-sm text-gray-700"},Ze={class:"font-medium"},et={class:"font-medium"},tt={class:"font-medium"},st={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},ot={key:1,class:"text-center py-12"},rt={key:2,class:"fixed inset-0 overflow-y-auto z-50"},lt={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},at={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},nt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},it={class:"sm:flex sm:items-start"},dt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ct={class:"mt-2"},ut={class:"text-sm text-gray-500"},mt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},xt=["disabled"],pt={key:0},ft={key:1},ht=["disabled"],gt={__name:"Index",props:{teachers:Object,filters:Object},setup(a){const c=a,g=v({search:c.filters?.search||""}),m=v(!1),f=v(null),u=v(!1);P(g,W.debounce(s=>{b.get(route("admin.teachers.index"),s,{preserveState:!0,replace:!0})},300),{deep:!0});const j=()=>{g.value={search:""}},D=w(()=>c.teachers?.data?c.teachers.data.filter(s=>!s.suspended_at).length:0),A=w(()=>c.teachers?.data?c.teachers.data.filter(s=>s.appraisals_count>0).length:0),M=w(()=>{if(!c.teachers?.data)return 0;const s=c.teachers.data.filter(o=>o.latest_appraisal&&o.latest_appraisal.overall_score);if(s.length===0)return 0;const t=s.reduce((o,d)=>o+parseFloat(d.latest_appraisal.overall_score),0);return Math.round(t/s.length)}),z=s=>!s&&s!==0?"text-gray-500":s>=80?"text-green-600":s>=70?"text-yellow-600":s>=60?"text-orange-600":"text-red-600",L=s=>s?s.suspended_at?"bg-red-100 text-red-800":s.teacher_profile?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",$=s=>s?s.suspended_at?"Suspended":s.teacher_profile?"Active":"Incomplete":"Unknown",N=s=>s?.job_applications_count?Math.floor((s.job_applications_count||0)*.3):0,B=s=>{if(!s)return"Unknown date";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(t){return console.error("Date formatting error:",t),"Invalid date"}},I=(s,t={})=>{try{return route().has(s)?route(s,t):(console.warn(`Route ${s} not found`),"#")}catch(o){return console.error("Route error:",o),"#"}},F=s=>{if(!s?.id){console.error("Teacher ID is missing:",s),alert("Cannot update status: Invalid teacher data");return}const t=s.suspended_at?"unsuspend":"suspend",o=s.suspended_at?"admin.users.unsuspend":"admin.users.suspend";if(!route().has(o)){console.error(`Route ${o} not found`),alert("Action not available");return}confirm(`Are you sure you want to ${t} ${s.name}?`)&&b.post(route(o,s.id),{},{preserveScroll:!0,onSuccess:()=>{},onError:d=>{alert("Failed to update user status")}})},U=s=>{if(!s?.id){console.error("Cannot delete: Teacher ID is missing",s),alert("Cannot delete: Invalid teacher data");return}f.value=s,m.value=!0},V=()=>{if(!f.value?.id){console.error("No teacher selected for deletion"),m.value=!1;return}if(!route().has("admin.teachers.destroy")){console.error("Route admin.teachers.destroy not found"),alert("Delete action not available"),m.value=!1;return}u.value=!0,b.delete(route("admin.teachers.destroy",f.value.id),{preserveScroll:!1,onSuccess:()=>{m.value=!1,f.value=null,u.value=!1},onError:s=>{console.error("Delete error:",s),alert("Failed to delete teacher. Please try again."),u.value=!1},onFinish:()=>{u.value=!1}})};return(s,t)=>(l(),C(H,null,{header:h(()=>[...t[2]||(t[2]=[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Teachers Management ",-1)])]),default:h(()=>[s.$page.props.flash.success?(l(),n("div",O,[e("div",J,[e("div",G,[t[3]||(t[3]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",K,[e("p",Q,r(s.$page.props.flash.success),1)])])])])):x("",!0),s.$page.props.flash.error?(l(),n("div",X,[e("div",Y,[e("div",Z,[t[4]||(t[4]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",ee,[e("p",te,r(s.$page.props.flash.error),1)])])])])):x("",!0),e("div",se,[e("div",oe,[e("div",re,[e("div",le,[e("div",ae,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Teachers",-1)),e("dd",ne,r(a.teachers.total),1)])]),e("div",ie,[e("div",de,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active Profiles",-1)),e("dd",ce,r(D.value),1)])]),e("div",ue,[e("div",me,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"With Appraisals",-1)),e("dd",xe,r(A.value),1)])]),e("div",pe,[e("div",fe,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Avg. Score",-1)),e("dd",he,r(M.value)+"%",1)])])]),e("div",ge,[e("div",ve,[e("div",null,[t[9]||(t[9]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Search",-1)),R(e("input",{type:"text",id:"search","onUpdate:modelValue":t[0]||(t[0]=o=>g.value.search=o),placeholder:"Name, email, qualification...",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},null,512),[[E,g.value.search]])]),e("div",{class:"flex items-end space-x-2"},[e("button",{onClick:j,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Reset ")])])]),e("div",ye,[e("div",_e,[e("div",be,[t[10]||(t[10]=e("div",null,[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," All Teachers "),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"}," Manage and monitor all registered teachers in the system. ")],-1)),e("div",null,[e("span",we," Total: "+r(a.teachers.total)+" teachers ",1)])])]),e("div",ke,[e("table",Ce,[t[12]||(t[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Teacher "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Profile "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Appraisals "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Applications "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Te,[(l(!0),n(T,null,S(a.teachers.data,o=>(l(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[e("td",Se,[e("div",je,[e("div",De,[e("img",{class:"h-10 w-10 rounded-full",src:o.profile_photo_url||"/default-avatar.png",alt:o.name},null,8,Ae)]),e("div",Me,[e("div",ze,r(o.name),1),e("div",Le,r(o.email),1),e("div",$e," Joined "+r(B(o.created_at)),1)])])]),e("td",Ne,[o.teacher_profile?(l(),n("div",Be,[e("div",Ie,r(o.teacher_profile.qualification),1),e("div",null,r(o.teacher_profile.specialization),1),e("div",Fe,r(o.teacher_profile.years_of_experience||0)+" yrs exp ",1)])):(l(),n("div",Ue," Profile incomplete "))]),e("td",Ve,[e("div",Pe,r(o.appraisals_count||0)+" total ",1),o.latest_appraisal?(l(),n("div",{key:0,class:p(["text-xs",z(o.latest_appraisal.overall_score)])}," Latest: "+r(o.latest_appraisal.overall_score)+"% ",3)):(l(),n("div",Re," No appraisals "))]),e("td",Ee,[i(r(o.job_applications_count||0)+" applications ",1),o.job_applications_count>0?(l(),n("div",He,r(N(o))+" shortlisted ",1)):x("",!0)]),e("td",We,[e("span",{class:p(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",L(o)])},r($(o)),3)]),e("td",qe,[e("div",Oe,[k(y(_),{href:I("admin.teachers.show",o.id),class:"text-blue-600 hover:text-blue-900"},{default:h(()=>[...t[11]||(t[11]=[i(" View ",-1)])]),_:1},8,["href"]),e("button",{onClick:d=>F(o),class:p(o.suspended_at?"text-green-600 hover:text-green-900":"text-yellow-600 hover:text-yellow-900")},r(o.suspended_at?"Unsuspend":"Suspend"),11,Je),e("button",{onClick:d=>U(o),class:"text-red-600 hover:text-red-900"}," Delete ",8,Ge)])])]))),128))])])]),a.teachers.links.length>3?(l(),n("div",Ke,[e("div",Qe,[k(y(_),{href:a.teachers.prev_page_url||"#",class:p([{"opacity-50 cursor-not-allowed":!a.teachers.prev_page_url},"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"])},{default:h(()=>[...t[13]||(t[13]=[i(" Previous ",-1)])]),_:1},8,["href","class"]),k(y(_),{href:a.teachers.next_page_url||"#",class:p([{"opacity-50 cursor-not-allowed":!a.teachers.next_page_url},"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"])},{default:h(()=>[...t[14]||(t[14]=[i(" Next ",-1)])]),_:1},8,["href","class"])]),e("div",Xe,[e("div",null,[e("p",Ye,[t[15]||(t[15]=i(" Showing ",-1)),e("span",Ze,r(a.teachers.from),1),t[16]||(t[16]=i(" to ",-1)),e("span",et,r(a.teachers.to),1),t[17]||(t[17]=i(" of ",-1)),e("span",tt,r(a.teachers.total),1),t[18]||(t[18]=i(" teachers ",-1))])]),e("div",null,[e("nav",st,[(l(!0),n(T,null,S(a.teachers.links,(o,d)=>(l(),C(y(_),{key:d,href:o.url||"#",class:p(["relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",{"bg-blue-50 border-blue-500 text-blue-600 z-10":o.active,"rounded-l-md":d===0,"rounded-r-md":d===a.teachers.links.length-1,"opacity-50 cursor-not-allowed":!o.url}]),innerHTML:o.label},null,8,["href","class","innerHTML"]))),128))])])])])):x("",!0),a.teachers.data.length===0?(l(),n("div",ot,[...t[19]||(t[19]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No teachers found",-1),e("p",{class:"mt-1 text-sm text-gray-500"}," No teachers match your current search criteria. ",-1)])])):x("",!0)])])]),m.value?(l(),n("div",rt,[e("div",lt,[t[26]||(t[26]=e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[27]||(t[27]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹",-1)),e("div",at,[e("div",nt,[e("div",it,[t[24]||(t[24]=e("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",dt,[t[23]||(t[23]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Delete Teacher ",-1)),e("div",ct,[e("p",ut,[t[20]||(t[20]=i(" Are you sure you want to delete ",-1)),e("strong",null,r(f.value?.name),1),t[21]||(t[21]=i("? This action cannot be undone. ",-1))]),t[22]||(t[22]=e("div",{class:"mt-4 p-3 bg-red-50 rounded-md"},[e("p",{class:"text-sm text-red-700"},[e("strong",null,"Warning:"),i(" This will permanently delete: ")]),e("ul",{class:"mt-1 text-sm text-red-600 list-disc list-inside"},[e("li",null,"Teacher profile"),e("li",null,"All appraisals"),e("li",null,"All job applications"),e("li",null,"All payment records"),e("li",null,"User account")])],-1))])])])]),e("div",mt,[e("button",{type:"button",onClick:V,disabled:u.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(l(),n("span",pt,[...t[25]||(t[25]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),i(" Deleting... ",-1)])])):(l(),n("span",ft," Delete "))],8,xt),e("button",{type:"button",onClick:t[1]||(t[1]=o=>m.value=!1),disabled:u.value,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,ht)])])])])):x("",!0)]),_:1}))}},wt=q(gt,[["__scopeId","data-v-7155fc1d"]]);export{wt as default};
